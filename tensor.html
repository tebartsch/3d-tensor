<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>3D Tensor</title>
        <style>
            body { margin: 0; }
        </style>
    </head>
    <body>
        <div class="slidecontainer">
            <input type="range" min="0" max="360" value="0" class="slider" id="slider_angle_x">
            <output id="slider_x_label">0</output>
            <input type="range" min="0" max="360" value="0" class="slider" id="slider_angle_y">
            <output id="slider_y_label">0</output>
            <input type="range" min="0" max="360" value="0" class="slider" id="slider_angle_z">
            <output id="slider_z_label">0</output>
        </div>

        <script src="js/three.js"></script>
        <script>
            var angle_x = document.getElementById("slider_angle_x");
            var slider_x_label = document.getElementById("slider_x_label");
            angle_x.oninput = function() {
                slider_x_label.innerHTML = this.value;
            }
            var angle_y = document.getElementById("slider_angle_y");
            var slider_y_label = document.getElementById("slider_y_label");
            angle_y.oninput = function() {
                slider_y_label.innerHTML = this.value;
            }
            var angle_z = document.getElementById("slider_angle_z");
            var slider_z_label = document.getElementById("slider_z_label");
            angle_z.oninput = function() {
                slider_z_label.innerHTML = this.value;
            }

            const camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 0.01, 1000 );
            camera.lookAt(0, 0, 0);
            camera.position.z = 15;

            const scene = new THREE.Scene();
            scene.background = new THREE.Color( 0xffffff );

            const renderer = new THREE.WebGLRenderer({alpha: true });
            renderer.setSize( window.innerWidth, window.innerHeight );
            renderer.setAnimationLoop( animation );
            document.body.appendChild( renderer.domElement );

            let cols = 9;
            let rows = 4;
            let depth = 4;

            cube_dim = 0.4

            const geometry = new THREE.BoxGeometry( cube_dim, cube_dim, cube_dim );
            const material = new THREE.MeshMatcapMaterial();
            let cubes = [];

            var group = new THREE.Group();
            scene.add(group);

            for (let c = 0; c < cols; c++) {
                cubes.push([])
                for (let r = 0; r < rows; r++) {
                    cubes[c].push([])
                    for (let d = 0; d < depth; d++) {
                        const cube = new THREE.Mesh( geometry, material );
                        cube.translateX( - cols / 2 + c + cube_dim);
                        cube.translateY( - rows / 2 + r + cube_dim);
                        cube.translateZ( - depth / 2 + d + cube_dim);
                        cubes[c][r].push(cube);
                        group.add( cube );
                    }
                }
            }

            preset_angle_x = 0
            preset_angle_y = 0
            preset_angle_z = 0.0

            group.rotation.x = preset_angle_x
            group.rotation.y = preset_angle_y
            group.rotation.z = preset_angle_z

            function animation( time ) {
                group.rotation.x = preset_angle_x + angle_x.value / 360 * (2 * 3.1459);
                group.rotation.y = preset_angle_y + angle_y.value / 360 * (2 * 3.1459);
                group.rotation.z = preset_angle_z + angle_z.value / 360 * (2 * 3.1459);

            renderer.render( scene, camera );
            };
        </script>
    </body>
</html>
